"use strict";(self.webpackChunkmechsix_github_io_source=self.webpackChunkmechsix_github_io_source||[]).push([[87995],{59543:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>V,contentTitle:()=>C,default:()=>M,frontMatter:()=>T,metadata:()=>r,toc:()=>P});const r=JSON.parse('{"id":"rust/crate_and_module","title":"Crate & Module","description":"Crate","source":"@site/docs/rust/crate_and_module.mdx","sourceDirName":"rust","slug":"/rust/crate_and_module","permalink":"/docs/rust/crate_and_module","draft":false,"unlisted":false,"tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Crate & Module","sidebar_title":"Crate & Module","sidebar_position":2},"sidebar":"docSidebar","previous":{"title":"Intro","permalink":"/docs/rust/intro"},"next":{"title":"Fbcid Trim","permalink":"/docs/scripts/fbcid-trim"}}');var s=t(74848),a=t(28453),l=t(96540),o=t(18215),i=t(65627),c=t(56347),d=t(50372),u=t(30604),h=t(11861),m=t(78749);function p(e){return l.Children.toArray(e).filter((e=>"\n"!==e)).map((e=>{if(!e||(0,l.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)}))?.filter(Boolean)??[]}function x(e){const{values:n,children:t}=e;return(0,l.useMemo)((()=>{const e=n??function(e){return p(e).map((e=>{let{props:{value:n,label:t,attributes:r,default:s}}=e;return{value:n,label:t,attributes:r,default:s}}))}(t);return function(e){const n=(0,h.XI)(e,((e,n)=>e.value===n.value));if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e}),[n,t])}function g(e){let{value:n,tabValues:t}=e;return t.some((e=>e.value===n))}function j(e){let{queryString:n=!1,groupId:t}=e;const r=(0,c.W6)(),s=function(e){let{queryString:n=!1,groupId:t}=e;if("string"==typeof n)return n;if(!1===n)return null;if(!0===n&&!t)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return t??null}({queryString:n,groupId:t});return[(0,u.aZ)(s),(0,l.useCallback)((e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})}),[s,r])]}function f(e){const{defaultValue:n,queryString:t=!1,groupId:r}=e,s=x(e),[a,o]=(0,l.useState)((()=>function(e){let{defaultValue:n,tabValues:t}=e;if(0===t.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(n){if(!g({value:n,tabValues:t}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${n}" but none of its children has the corresponding value. Available values are: ${t.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return n}const r=t.find((e=>e.default))??t[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:s}))),[i,c]=j({queryString:t,groupId:r}),[u,h]=function(e){let{groupId:n}=e;const t=function(e){return e?`docusaurus.tab.${e}`:null}(n),[r,s]=(0,m.Dv)(t);return[r,(0,l.useCallback)((e=>{t&&s.set(e)}),[t,s])]}({groupId:r}),p=(()=>{const e=i??u;return g({value:e,tabValues:s})?e:null})();(0,d.A)((()=>{p&&o(p)}),[p]);return{selectedValue:a,selectValue:(0,l.useCallback)((e=>{if(!g({value:e,tabValues:s}))throw new Error(`Can't select invalid tab value=${e}`);o(e),c(e),h(e)}),[c,h,s]),tabValues:s}}var b=t(9136);const v={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};function y(e){let{className:n,block:t,selectedValue:r,selectValue:a,tabValues:l}=e;const c=[],{blockElementScrollPositionUntilNextRender:d}=(0,i.a_)(),u=e=>{const n=e.currentTarget,t=c.indexOf(n),s=l[t].value;s!==r&&(d(n),a(s))},h=e=>{let n=null;switch(e.key){case"Enter":u(e);break;case"ArrowRight":{const t=c.indexOf(e.currentTarget)+1;n=c[t]??c[0];break}case"ArrowLeft":{const t=c.indexOf(e.currentTarget)-1;n=c[t]??c[c.length-1];break}}n?.focus()};return(0,s.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,o.A)("tabs",{"tabs--block":t},n),children:l.map((e=>{let{value:n,label:t,attributes:a}=e;return(0,s.jsx)("li",{role:"tab",tabIndex:r===n?0:-1,"aria-selected":r===n,ref:e=>{c.push(e)},onKeyDown:h,onClick:u,...a,className:(0,o.A)("tabs__item",v.tabItem,a?.className,{"tabs__item--active":r===n}),children:t??n},n)}))})}function k(e){let{lazy:n,children:t,selectedValue:r}=e;const a=(Array.isArray(t)?t:[t]).filter(Boolean);if(n){const e=a.find((e=>e.props.value===r));return e?(0,l.cloneElement)(e,{className:(0,o.A)("margin-top--md",e.props.className)}):null}return(0,s.jsx)("div",{className:"margin-top--md",children:a.map(((e,n)=>(0,l.cloneElement)(e,{key:n,hidden:e.props.value!==r})))})}function _(e){const n=f(e);return(0,s.jsxs)("div",{className:(0,o.A)("tabs-container",v.tabList),children:[(0,s.jsx)(y,{...n,...e}),(0,s.jsx)(k,{...n,...e})]})}function N(e){const n=(0,b.A)();return(0,s.jsx)(_,{...e,children:p(e.children)},String(n))}const w={tabItem:"tabItem_Ymn6"};function I(e){let{children:n,hidden:t,className:r}=e;return(0,s.jsx)("div",{role:"tabpanel",className:(0,o.A)(w.tabItem,r),hidden:t,children:n})}const T={title:"Crate & Module",sidebar_title:"Crate & Module",sidebar_position:2},C=void 0,V={},P=[{value:"Crate",id:"crate",level:2},{value:"Use Package",id:"use-package",level:2},{value:"In Project File",id:"in-project-file",level:2},{value:"In Project Folder",id:"in-project-folder",level:2},{value:"Vendors Package",id:"vendors-package",level:2},{value:"Unit Test",id:"unit-test",level:2}];function S(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,a.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.h2,{id:"crate",children:"Crate"}),"\n",(0,s.jsxs)(n.p,{children:["\u5b9a\u7fa9\u5728",(0,s.jsx)(n.code,{children:"Cargo.toml"}),"\u88e1\uff0c\u6307\u5411Rust\u793e\u7fa4\u7684\u5957\u4ef6\u5eab\uff0c",(0,s.jsx)(n.code,{children:"crago build"}),"\u6642\u6703\u5148\u53bb",(0,s.jsx)(n.a,{href:"https://crates.io",children:"crates.io"}),"\u6293\u5c0d\u61c9\u7684\u5957\u4ef6\u4e0b\u4f86"]}),"\n",(0,s.jsx)(n.admonition,{type:"note",children:(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.code,{children:"crago build"}),"\u9810\u8a2d\u6703\u5b89\u88dd\u5230",(0,s.jsx)(n.code,{children:"$HOME/.cargo/bin"})]})}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-toml",metastring:'title="Cargo.toml"',children:'[dependency]\nnum = "0.4"\nimage = "0.13"\n'})}),"\n",(0,s.jsx)(n.h2,{id:"use-package",children:"Use Package"}),"\n",(0,s.jsx)(n.p,{children:"\u9019\u88e1\u6307\u7684\u5957\u4ef6(Package)\uff0c\u6cdb\u6307\u53ef\u88ab\u5f15\u7528\u7684\u76ee\u6a19"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"In Project\n\u5728\u540c\u4e00\u500b\u5c08\u6848\u5167\u5f15\u7528\u540c\u70ba\u9019\u500b\u5c08\u6848\u958b\u767c\u7684\u5176\u4ed6\u5957\u4ef6"}),"\n",(0,s.jsxs)(n.li,{children:["Vendors\n\u4f7f\u7528\u7b2c\u4e09\u65b9\u958b\u767c\u7684\u5957\u4ef6\uff0c\u4ee5\u8a9e\u8a00\u751f\u614b\u7cfb\u4e0d\u540c\uff0c\u5927\u81f4\u53c8\u5206\u70ba",(0,s.jsx)(n.code,{children:"\u6709\u8a17\u7ba1"}),"\u8ddf",(0,s.jsx)(n.code,{children:"\u7121\u8a17\u7ba1"}),"\u5169\u7a2e\u76ee\u55b2"]}),"\n"]}),"\n",(0,s.jsxs)(n.table,{children:[(0,s.jsx)(n.thead,{children:(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.th,{}),(0,s.jsx)(n.th,{children:"Folder"}),(0,s.jsx)(n.th,{children:"File"})]})}),(0,s.jsxs)(n.tbody,{children:[(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Rust"}),(0,s.jsx)(n.td,{children:"Crate"}),(0,s.jsx)(n.td,{children:"Module"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Go"}),(0,s.jsx)(n.td,{children:"Workspace/Package"}),(0,s.jsx)(n.td,{children:"\u6a94\u540d\u4e0d\u91cd\u8981\uff0c\u91cd\u8981\u7684\u662fcode\u7b2c\u4e00\u884c\u7684package\u5ba3\u544a"})]}),(0,s.jsxs)(n.tr,{children:[(0,s.jsx)(n.td,{children:"Python"}),(0,s.jsx)(n.td,{children:"Package"}),(0,s.jsx)(n.td,{children:"Module"})]})]})]}),"\n",(0,s.jsx)(n.h2,{id:"in-project-file",children:"In Project File"}),"\n",(0,s.jsxs)(N,{children:[(0,s.jsxs)(I,{value:"rust",label:"Rust",default:!0,children:[(0,s.jsxs)(n.p,{children:["\u5c08\u6848\u76ee\u9304\u6703\u88ab\u7a31\u70baCrate Root\uff0c\u4f7f\u7528",(0,s.jsx)(n.code,{children:"mod"}),"\u4f5c\u70banamespace\u4e26\u5f15\u7528\u9032\u5176\u4ed6file\u7684\u5167\u5bb9"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="main.rs"',children:"  mod hello;\n\n  fn main() {\n      hello::say_hello();\n  }\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="hello.rs"',children:'pub fn say_hello() {\n    println!("Hello, world!");\n}\n'})})]}),(0,s.jsxs)(I,{value:"go",label:"Go",children:[(0,s.jsxs)(n.p,{children:["Go\u4ee5source code\u6a94\u6848\u7684",(0,s.jsx)(n.code,{children:"package"}),"\u5b9a\u7fa9\u6c7a\u5b9a\u662f\u4e0d\u662f\u540c\u5c6c\u4e00\u500bpackage\uff0c\u76f8\u540cpackage\u7684\u4e0d\u540c\u6a94\u6848\u4e26\u4e0d\u91cd\u8981\u4e5f\u4e0d\u9700\u8981import"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="hello.go"',children:'package main\n\nimport "fmt"\n\nfunc SayHello() {\n  fmt.Println("Hello")\n}\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:"package main\n\nfunc main() {\n  SayHello()\n}\n"})})]})]}),"\n",(0,s.jsx)(n.h2,{id:"in-project-folder",children:"In Project Folder"}),"\n",(0,s.jsxs)(N,{children:[(0,s.jsxs)(I,{value:"rust_mod",label:"Rust mod keyword",default:!0,children:[(0,s.jsxs)(n.p,{children:["\u5beb\u5728\u540c\u4e00\u500b\u6a94\u6848\uff0c\u7528",(0,s.jsx)(n.code,{children:"mod"}),"\u95dc\u9375\u5b57\u574e\u5957"]}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="main.rs"',children:'mod foo {\n  fn say_foo() {\n    println!("This is Foo");\n  }\n}\n\nfn main() {\n  foo::say_foo();\n}\n'})})]}),(0,s.jsxs)(I,{value:"rust_mod_rs",label:"Rust mod.rs",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="./foo/mod.rs"',children:'pub fn say_foo() {\n    println!("This is Foo");\n}\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="./main.rs"',children:"use foo;\n\nfn main() {\n  foo::say_foo();\n}\n"})})]}),(0,s.jsxs)(I,{value:"rust_mod_nested",label:"Rust Nested Mod",children:[(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="./foo/moo.rs"',children:'pub fn say_moo() {\n    println!("This is Foo\'s Moo");\n}\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="./foo.rs"',children:"pub mod moo;\n"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="./main.rs"',children:"use foo;\n\nfn main() {\n  foo::moo::say_foo();\n}\n"})})]}),(0,s.jsxs)(I,{value:"go",label:"Go Mod",children:[(0,s.jsx)(n.p,{children:"go\u7684\u5b50\u8cc7\u6599\u593e\u5167\u7684source code\uff0c\u88ab\u8996\u70ba\u76ee\u524d\u7684workspace\u4e0b\u7684\u53e6\u4e00\u500bGo Module"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="./foo/foo.go"',children:'package foo\n\nimport "fmt"\n\nfunc SayFoo() {\n\tfmt.Println("This is Foo")\n}\n'})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:'package main\n\nimport "lab1/foo"\n\nfunc main() {\n\tfoo.SayFoo()\n}\n\n'})})]})]}),"\n",(0,s.jsx)(n.h2,{id:"vendors-package",children:"Vendors Package"}),"\n",(0,s.jsxs)(N,{children:[(0,s.jsxs)(I,{value:"rust",label:"Rust",default:!0,children:[(0,s.jsxs)(n.p,{children:["\u4f9d\u8cf4",(0,s.jsx)(n.code,{children:"Cargo.toml"}),"\u5167\u7684dependency\uff0c\u5f9e",(0,s.jsx)(n.code,{children:"crates.io"}),"\u4e0a\u88dd\u4e0b\u4f86\u3002\u4f7f\u7528\u76f4\u63a5import crate name\u5c31\u53ef\u4ee5\u4f7f\u7528"]}),(0,s.jsx)(n.p,{children:"\u4e5f\u53ef\u4ee5\u76f4\u63a5\u88dd\u6c92\u6709\u5728crates.io\u4e0a\u7684Git repo"}),(0,s.jsx)(n.p,{children:(0,s.jsx)(n.code,{children:"cargo install --git github.com/mechsix/rustexample"})}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",metastring:'title="main.rs"',children:'use image::io::Reader;\n\nfn main() {\n  let img = Reader::open("example.png")?.decode()?;\n  // ...\n}\n'})})]}),(0,s.jsxs)(I,{value:"go",label:"Go",children:[(0,s.jsx)(n.p,{children:"Go\u56e0\u70ba\u6c92\u6709\u96c6\u4e2d\u7684Package Service"}),(0,s.jsx)(n.p,{children:"Vendor\u5957\u4ef6\u8207\u8cc7\u6599\u593e\u7684\u505a\u6cd5\u76f8\u540c\uff0cGo\u7684Mod\u57fa\u672c\u4e0a\u90fd\u662f\u5168\u57df\u7684\u7d55\u5c0d\u8def\u5f91"}),(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-go",metastring:'title="main.go"',children:'package main\n\nimport "github.com/mechsix/goexample"\n\nfunc main() {\n  goexample.Hello()\n}\n'})})]})]}),"\n",(0,s.jsx)(n.h2,{id:"unit-test",children:"Unit Test"}),"\n",(0,s.jsxs)(n.p,{children:["Rust\u7684test\u662f\u4f7f\u7528",(0,s.jsx)(n.code,{children:"tests"})," mod\uff0c\u53ef\u4ee5\u76f4\u63a5\u5beb\u5728code\u65c1"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-rust",children:"#[cfg(test)]\nmod tests {\n    // Note this useful idiom: importing names from outer (for mod tests) scope.\n    use super::*;\n\n    #[test]\n    fn test_add() {\n        assert_eq!(add(1, 2), 3);\n    }\n}\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u4f7f\u7528",(0,s.jsx)(n.code,{children:"crate"}),"\u53ef\u4ee5\u9019\u6a23\u76f4\u63a5\u57f7\u884c\u3002\u9019\u9810\u8a2d\u6703\u5c07\u6240\u6709\u7684",(0,s.jsx)(n.code,{children:"STDOUT"}),"\u96b1\u85cf\u8d77\u4f86"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ crate test\n"})}),"\n",(0,s.jsxs)(n.p,{children:["\u82e5\u60f3\u8981\u57f7\u884ctest\u6642\u4fdd\u7559",(0,s.jsx)(n.code,{children:"STDOUT"}),"\u5230console\uff0c\u53ef\u4ee5\u9019\u6a23\u4e0b"]}),"\n",(0,s.jsx)(n.pre,{children:(0,s.jsx)(n.code,{className:"language-shell",children:"$ crate test -- --nocapture\n"})})]})}function M(e={}){const{wrapper:n}={...(0,a.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(S,{...e})}):S(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>o});var r=t(96540);const s={},a=r.createContext(s);function l(e){const n=r.useContext(a);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:l(e.components),r.createElement(a.Provider,{value:n},e.children)}}}]);